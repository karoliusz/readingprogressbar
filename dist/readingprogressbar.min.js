var ReadingProgressBar=function(){"use strict";const Vt={contentContainerClassName:"blogPost",cssClass:"readingProgressBar",throttleTimeMs:0},D={progressBarElement:"readingProgressBar",trackElement:"readingProgressBar__track"};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var R=function(r,t){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},R(r,t)};function w(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");R(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Ut(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(y){s(y)}}function c(l){try{u(n.throw(l))}catch(y){s(y)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,t||[])).next())})}function tt(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function A(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}function P(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}function C(r){return this instanceof C?(this.v=r,this):new C(r)}function Ht(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){n[f]&&(i[f]=function(d){return new Promise(function(p,v){o.push([f,d,p,v])>1||a(f,d)})})}function a(f,d){try{c(n[f](d))}catch(p){y(o[0][3],p)}}function c(f){f.value instanceof C?Promise.resolve(f.value.v).then(u,l):y(o[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function y(f,d){f(d),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Mt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof A=="function"?A(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=r[o]&&function(s){return new Promise(function(a,c){s=r[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}function h(r){return typeof r=="function"}function et(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Y=et(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function k(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var T=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=A(s),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(v){t={error:v}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else s.remove(this);var l=this.initialTeardown;if(h(l))try{l()}catch(v){o=v instanceof Y?v.errors:[v]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var f=A(y),d=f.next();!d.done;d=f.next()){var p=d.value;try{it(p)}catch(v){o=o!=null?o:[],v instanceof Y?o=P(P([],_(o)),_(v.errors)):o.push(v)}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}if(o)throw new Y(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)it(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&k(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&k(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}(),rt=T.EMPTY;function nt(r){return r instanceof T||r&&"closed"in r&&h(r.remove)&&h(r.add)&&h(r.unsubscribe)}function it(r){h(r)?r():r.unsubscribe()}var O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},j={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=j.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,P([r,t],_(e))):setTimeout.apply(void 0,P([r,t],_(e)))},clearTimeout:function(r){var t=j.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function ot(r){j.setTimeout(function(){var t=O.onUnhandledError;if(t)t(r);else throw r})}function st(){}var Dt=function(){return F("C",void 0,void 0)}();function Rt(r){return F("E",void 0,r)}function Yt(r){return F("N",r,void 0)}function F(r,t,e){return{kind:r,value:t,error:e}}var B=null;function L(r){if(O.useDeprecatedSynchronousErrorHandling){var t=!B;if(t&&(B={errorThrown:!1,error:null}),r(),t){var e=B,n=e.errorThrown,i=e.error;if(B=null,n)throw i}}else r()}var z=function(r){w(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,nt(e)&&e.add(n)):n.destination=Gt,n}return t.create=function(e,n,i){return new G(e,n,i)},t.prototype.next=function(e){this.isStopped?K(Yt(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?K(Rt(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?K(Dt,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(T),Ft=Function.prototype.bind;function q(r,t){return Ft.call(r,t)}var zt=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){$(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){$(n)}else $(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){$(e)}},r}(),G=function(r){w(t,r);function t(e,n,i){var o=r.call(this)||this,s;if(h(e)||!e)s={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var a;o&&O.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=function(){return o.unsubscribe()},s={next:e.next&&q(e.next,a),error:e.error&&q(e.error,a),complete:e.complete&&q(e.complete,a)}):s=e}return o.destination=new zt(s),o}return t}(z);function $(r){ot(r)}function qt(r){throw r}function K(r,t){var e=O.onStoppedNotification;e&&j.setTimeout(function(){return e(r,t)})}var Gt={closed:!0,next:st,error:qt,complete:st},N=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function I(r){return r}function Kt(r){return r.length===0?I:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var m=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=Jt(t)?t:new G(t,e,n);return L(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=ut(e),new e(function(i,o){var s=new G({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[N]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Kt(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=ut(t),new t(function(n,i){var o;e.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function ut(r){var t;return(t=r!=null?r:O.Promise)!==null&&t!==void 0?t:Promise}function Nt(r){return r&&h(r.next)&&h(r.error)&&h(r.complete)}function Jt(r){return r&&r instanceof z||Nt(r)&&nt(r)}function Qt(r){return h(r==null?void 0:r.lift)}function g(r){return function(t){if(Qt(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function b(r,t,e,n,i){return new Wt(r,t,e,n,i)}var Wt=function(r){w(t,r);function t(e,n,i,o,s,a){var c=r.call(this,e)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=n?function(u){try{n(u)}catch(l){e.error(l)}}:r.prototype._next,c._error=o?function(u){try{o(u)}catch(l){e.error(l)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=i?function(){try{i()}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._complete,c}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(z),Xt=et(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),at=function(r){w(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var n=new ct(this,this);return n.operator=e,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new Xt},t.prototype.next=function(e){var n=this;L(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=A(n.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(e)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var n=this;L(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=e;for(var i=n.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;L(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var n=e.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?rt:(this.currentObservers=null,a.push(e),new T(function(){n.currentObservers=null,k(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?e.error(o):s&&e.complete()},t.prototype.asObservable=function(){var e=new m;return e.source=this,e},t.create=function(e,n){return new ct(e,n)},t}(m),ct=function(r){w(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return t.prototype.next=function(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)},t.prototype.error=function(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)},t.prototype.complete=function(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)},t.prototype._subscribe=function(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:rt},t}(at),Zt=function(r){w(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){var e=this,n=e.hasError,i=e.thrownError,o=e._value;if(n)throw i;return this._throwIfClosed(),o},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(at),lt={now:function(){return(lt.delegate||Date).now()},delegate:void 0},te=function(r){w(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(T),V={setInterval:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=V.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,P([r,t],_(e))):setInterval.apply(void 0,P([r,t],_(e)))},clearInterval:function(r){var t=V.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0},ee=function(r){w(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),V.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;V.clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o;try{this.work(e)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,n=e.id,i=e.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,k(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t}(te),ft=function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},r.now=lt.now,r}(),re=function(r){w(t,r);function t(e,n){n===void 0&&(n=ft.now);var i=r.call(this,e,n)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return t.prototype.flush=function(e){var n=this.actions;if(this._active){n.push(e);return}var i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(ft),J=new re(ee),ne=J,ie=new m(function(r){return r.complete()});function ht(r){return r&&h(r.schedule)}function Q(r){return r[r.length-1]}function oe(r){return h(Q(r))?r.pop():void 0}function dt(r){return ht(Q(r))?r.pop():void 0}function se(r,t){return typeof Q(r)=="number"?r.pop():t}var W=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function vt(r){return h(r==null?void 0:r.then)}function pt(r){return h(r[N])}function yt(r){return Symbol.asyncIterator&&h(r==null?void 0:r[Symbol.asyncIterator])}function mt(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ue(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bt=ue();function wt(r){return h(r==null?void 0:r[bt])}function gt(r){return Ht(this,arguments,function(){var e,n,i,o;return tt(this,function(s){switch(s.label){case 0:e=r.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,C(e.read())];case 3:return n=s.sent(),i=n.value,o=n.done,o?[4,C(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,C(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function St(r){return h(r==null?void 0:r.getReader)}function E(r){if(r instanceof m)return r;if(r!=null){if(pt(r))return ae(r);if(W(r))return ce(r);if(vt(r))return le(r);if(yt(r))return _t(r);if(wt(r))return fe(r);if(St(r))return he(r)}throw mt(r)}function ae(r){return new m(function(t){var e=r[N]();if(h(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ce(r){return new m(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function le(r){return new m(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ot)})}function fe(r){return new m(function(t){var e,n;try{for(var i=A(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}t.complete()})}function _t(r){return new m(function(t){de(r,t).catch(function(e){return t.error(e)})})}function he(r){return _t(gt(r))}function de(r,t){var e,n,i,o;return Ut(this,void 0,void 0,function(){var s,a;return tt(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),e=Mt(r),c.label=1;case 1:return[4,e.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function S(r,t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){e(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(o),!i)return o}function Et(r,t){return t===void 0&&(t=0),g(function(e,n){e.subscribe(b(n,function(i){return S(n,r,function(){return n.next(i)},t)},function(){return S(n,r,function(){return n.complete()},t)},function(i){return S(n,r,function(){return n.error(i)},t)}))})}function Pt(r,t){return t===void 0&&(t=0),g(function(e,n){n.add(r.schedule(function(){return e.subscribe(n)},t))})}function ve(r,t){return E(r).pipe(Pt(t),Et(t))}function pe(r,t){return E(r).pipe(Pt(t),Et(t))}function ye(r,t){return new m(function(e){var n=0;return t.schedule(function(){n===r.length?e.complete():(e.next(r[n++]),e.closed||this.schedule())})})}function me(r,t){return new m(function(e){var n;return S(e,t,function(){n=r[bt](),S(e,t,function(){var i,o,s;try{i=n.next(),o=i.value,s=i.done}catch(a){e.error(a);return}s?e.complete():e.next(o)},0,!0)}),function(){return h(n==null?void 0:n.return)&&n.return()}})}function At(r,t){if(!r)throw new Error("Iterable cannot be null");return new m(function(e){S(e,t,function(){var n=r[Symbol.asyncIterator]();S(e,t,function(){n.next().then(function(i){i.done?e.complete():e.next(i.value)})},0,!0)})})}function be(r,t){return At(gt(r),t)}function we(r,t){if(r!=null){if(pt(r))return ve(r,t);if(W(r))return ye(r,t);if(vt(r))return pe(r,t);if(yt(r))return At(r,t);if(wt(r))return me(r,t);if(St(r))return be(r,t)}throw mt(r)}function X(r,t){return t?we(r,t):E(r)}function ge(r){return r instanceof Date&&!isNaN(r)}function U(r,t){return g(function(e,n){var i=0;e.subscribe(b(n,function(o){n.next(r.call(t,o,i++))}))})}var Se=Array.isArray;function _e(r,t){return Se(t)?r.apply(void 0,P([],_(t))):r(t)}function Ct(r){return U(function(t){return _e(r,t)})}var Ee=Array.isArray,Pe=Object.getPrototypeOf,Ae=Object.prototype,Ce=Object.keys;function Ie(r){if(r.length===1){var t=r[0];if(Ee(t))return{args:t,keys:null};if(Te(t)){var e=Ce(t);return{args:e.map(function(n){return t[n]}),keys:e}}}return{args:r,keys:null}}function Te(r){return r&&typeof r=="object"&&Pe(r)===Ae}function Oe(r,t){return r.reduce(function(e,n,i){return e[n]=t[i],e},{})}function xe(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=dt(r),n=oe(r),i=Ie(r),o=i.args,s=i.keys;if(o.length===0)return X([],e);var a=new m(ke(o,e,s?function(c){return Oe(s,c)}:I));return n?a.pipe(Ct(n)):a}function ke(r,t,e){return e===void 0&&(e=I),function(n){It(t,function(){for(var i=r.length,o=new Array(i),s=i,a=i,c=function(l){It(t,function(){var y=X(r[l],t),f=!1;y.subscribe(b(n,function(d){o[l]=d,f||(f=!0,a--),a||n.next(e(o.slice()))},function(){--s||n.complete()}))},n)},u=0;u<i;u++)c(u)},n)}}function It(r,t,e){r?S(e,r,t):t()}function je(r,t,e,n,i,o,s,a){var c=[],u=0,l=0,y=!1,f=function(){y&&!c.length&&!u&&t.complete()},d=function(v){return u<n?p(v):c.push(v)},p=function(v){o&&t.next(v),u++;var $t=!1;E(e(v,l++)).subscribe(b(t,function(x){i==null||i(x),o?d(x):t.next(x)},function(){$t=!0},void 0,function(){if($t)try{u--;for(var x=function(){var M=c.shift();s?S(t,s,function(){return p(M)}):p(M)};c.length&&u<n;)x();f()}catch(M){t.error(M)}}))};return r.subscribe(b(t,d,function(){y=!0,f()})),function(){a==null||a()}}function Z(r,t,e){return e===void 0&&(e=1/0),h(t)?Z(function(n,i){return U(function(o,s){return t(n,o,i,s)})(E(r(n,i)))},e):(typeof t=="number"&&(e=t),g(function(n,i){return je(n,i,r,e)}))}function Be(r){return r===void 0&&(r=1/0),Z(I,r)}var Le=["addListener","removeListener"],$e=["addEventListener","removeEventListener"],Ve=["on","off"];function H(r,t,e,n){if(h(e)&&(n=e,e=void 0),n)return H(r,t,e).pipe(Ct(n));var i=_(Me(r)?$e.map(function(a){return function(c){return r[a](t,c,e)}}):Ue(r)?Le.map(Tt(r,t)):He(r)?Ve.map(Tt(r,t)):[],2),o=i[0],s=i[1];if(!o&&W(r))return Z(function(a){return H(a,t,e)})(E(r));if(!o)throw new TypeError("Invalid event target");return new m(function(a){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return a.next(1<u.length?u:u[0])};return o(c),function(){return s(c)}})}function Tt(r,t){return function(e){return function(n){return r[e](t,n)}}}function Ue(r){return h(r.addListener)&&h(r.removeListener)}function He(r){return h(r.on)&&h(r.off)}function Me(r){return h(r.addEventListener)&&h(r.removeEventListener)}function De(r,t,e){r===void 0&&(r=0),e===void 0&&(e=ne);var n=-1;return t!=null&&(ht(t)?e=t:n=t),new m(function(i){var o=ge(r)?+r-e.now():r;o<0&&(o=0);var s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function Re(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=dt(r),n=se(r,1/0),i=r;return i.length?i.length===1?E(i[0]):Be(n)(X(i,e)):ie}function Ye(r,t){return g(function(e,n){var i=0;e.subscribe(b(n,function(o){return r.call(t,o,i++)&&n.next(o)}))})}function Fe(r,t){return t===void 0&&(t=J),g(function(e,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function c(){var u=s+r,l=t.now();if(l<u){i=this.schedule(void 0,u-l),n.add(i);return}a()}e.subscribe(b(n,function(u){o=u,s=t.now(),i||(i=t.schedule(c,r),n.add(i))},function(){a(),n.complete()},void 0,function(){o=i=null}))})}function ze(r,t){return t===void 0&&(t=I),r=r!=null?r:qe,g(function(e,n){var i,o=!0;e.subscribe(b(n,function(s){var a=t(s);(o||!r(i,a))&&(o=!1,i=a,n.next(s))}))})}function qe(r,t){return r===t}function Ge(r,t){return ze(function(e,n){return t?t(e[r],n[r]):e[r]===n[r]})}function Ke(r,t,e){var n=h(r)||t||e?{next:r,error:t,complete:e}:r;return n?g(function(i,o){var s;(s=n.subscribe)===null||s===void 0||s.call(n);var a=!0;i.subscribe(b(o,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),o.next(c)},function(){var c;a=!1,(c=n.complete)===null||c===void 0||c.call(n),o.complete()},function(c){var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,c),o.error(c)},function(){var c,u;a&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):I}var Ot={leading:!0,trailing:!1};function Ne(r,t){return t===void 0&&(t=Ot),g(function(e,n){var i=t.leading,o=t.trailing,s=!1,a=null,c=null,u=!1,l=function(){c==null||c.unsubscribe(),c=null,o&&(d(),u&&n.complete())},y=function(){c=null,u&&n.complete()},f=function(p){return c=E(r(p)).subscribe(b(n,l,y))},d=function(){if(s){s=!1;var p=a;a=null,n.next(p),!u&&f(p)}};e.subscribe(b(n,function(p){s=!0,a=p,!(c&&!c.closed)&&(i?d():f(p))},function(){u=!0,!(o&&s&&c&&!c.closed)&&n.complete()}))})}function Je(r,t,e){t===void 0&&(t=J),e===void 0&&(e=Ot);var n=De(r,t);return Ne(function(){return n},e)}var Qe=Object.defineProperty,We=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,kt=(r,t,e)=>t in r?Qe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,er=(r,t)=>{for(var e in t||(t={}))Ze.call(t,e)&&kt(r,e,t[e]);if(xt)for(var e of xt(t))tr.call(t,e)&&kt(r,e,t[e]);return r},rr=(r,t)=>We(r,Xe(t));class nr{constructor(t,e=[]){this.scroll$=null,this.resize$=null,this.activeContainer$=null,this.lastActiveContainer$=null,this.viewportHeight=null,this.trackedContainers=new Set;let n=null;this.updateViewportHeight(),e&&(this.addTrackedContainers(e),n=this.getActiveContainer()),this.viewportChange$=new Zt({activeContainerId:n?n.id:null,scrollPercentage:n?this.calculateScrollPercentage(n):0}),this.scroll$=H(window,"scroll"),this.resize$=H(window,"resize").pipe(Fe(300),Ke(()=>this.updateViewportHeight())),this.activeContainer$=Re(this.scroll$,this.resize$).pipe(Je(t,null,{trailing:!0,leading:!1}),U(()=>this.getActiveContainer())),this.lastActiveContainer$=this.activeContainer$.pipe(Ye(i=>!!i),Ge("id")),xe([this.activeContainer$,this.lastActiveContainer$]).pipe(U(i=>this.getViewportState(...i))).subscribe(i=>this.viewportChange$.next(i))}addTrackedContainer(t){const e=rr(er({},t),{position:this.getContainerPosition(t.element)});return this.trackedContainers.add(e),Array.from(this.trackedContainers)}addTrackedContainers(t){return t.forEach(e=>this.addTrackedContainer(e)),Array.from(this.trackedContainers)}removeTrackedContainer(t){const e=this.trackedContainers,n=Array.from(e).find(({id:i})=>i===t);return n?this.trackedContainers.delete(n):!1}clearTrackedContainers(){this.trackedContainers.clear()}getActiveContainer(){return Array.from(this.trackedContainers).find(e=>this.isActive(e))}getViewportState(t,e){let n=t?this.calculateScrollPercentage(t):0;return e&&!t&&(n=this.scrolledPast(e)?100:0),{activeContainerId:t?t.id:null,scrollPercentage:n}}calculateScrollPercentage(t){const n=this.getScrollY()+this.viewportHeight,i=this.isActive(t),o=t.position.top<this.viewportHeight;if(i&&o){const s=t.position.bottom-this.viewportHeight,a=s-(t.position.bottom-n);return Math.round(a/s*1e3)/10}else if(i){const s=t.position.bottom-t.position.top,a=t.position.bottom-n,c=s-a;return Math.round(c/s*1e3)/10}return null}isActive({position:t}){const n=this.getScrollY()+this.viewportHeight,i=t.top>n,o=t.bottom>n;return!i&&o}scrolledPast(t){const n=this.getScrollY()+this.viewportHeight;return t.position.bottom<n}getContainerPosition(t){const e=t.getBoundingClientRect(),n=this.getScrollY();return{top:e.top+n,bottom:e.bottom+n}}updateViewportHeight(){const t=document.documentElement;this.viewportHeight=t.clientHeight}getScrollY(){return window.scrollY}}class ir{constructor(t,e){this.element=t,this.options=e,this.value=0,this.initialize()}setStatePercentage(t){let e=t;t>100?e=100:e<0&&(e=0),this.applyState(e)}dispose(){this.progressBarTrack.remove(),this.progressBarTrack=null,this.element.classList.remove(D.progressBarElement),this.options.cssClass&&this.element.classList.remove(this.options.cssClass),this.element=null}applyState(t){this.value=t,requestAnimationFrame(()=>{this.progressBarTrack.style.width=`${t}%`})}initialize(){const t=document.createElement("div");t.classList.add(D.trackElement),this.element.classList.add(this.options.cssClass),this.element.classList.add(D.progressBarElement),this.element.appendChild(t),this.progressBarTrack=t}}var or=Object.defineProperty,jt=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,Bt=(r,t,e)=>t in r?or(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Lt=(r,t)=>{for(var e in t||(t={}))sr.call(t,e)&&Bt(r,e,t[e]);if(jt)for(var e of jt(t))ur.call(t,e)&&Bt(r,e,t[e]);return r};class ar{constructor(t,e={}){this.options=Lt(Lt({},Vt),e),this.progressBar=new ir(t,this.options),this.viewport=new nr(this.options.throttleTimeMs,this.getTrackedContainers(this.options.contentContainerClassName)),this.reset(),this.viewport.viewportChange$.subscribe(({scrollPercentage:n})=>{this.progressBar.setStatePercentage(n)})}reset(){this.redetectContentContainers()}redetectContentContainers(){const{contentContainerClassName:t}=this.options;this.viewport.addTrackedContainers(this.getTrackedContainers(t))}getTrackedContainers(t){const e=document.getElementsByClassName(t);return Array.from(e).map((i,o)=>({id:o,element:i}))}}return ar}();
//# sourceMappingURL=readingprogressbar.min.js.map
